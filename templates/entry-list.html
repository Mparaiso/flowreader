<!-- templates/entity-list.html -->
<!--
 @copyright 2014 mparaiso <mparaiso@online.fr>
 @license GPL
-->
<section ng-controller="EntryListCtrl">
    <div class="lead">{{pageTitle}}</div>
    <h2 class="text-muted blink" data-ng-show="EntryCache.entries.length=0">Loading Entries...</h2>
    <div ng-include="extra" class="text-muted text-small"></div>
    <h2 class="text-muted" data-ng-show="EntryCache.entries.length<1">No Entry found, please subscribe a new feed.</h2>
    <!-- LIST OF ENTRIES -->
    <table class="table table-striped table-condensed table-hover">
        <!-- @note @angular orderBy http://docs.angularjs.org/api/ng/filter/orderBy http://jsfiddle.net/camus/Fp4nL/ -->
        <tr ng-repeat="entry in Pagination.slice(EntryCache.entries) |filter:{title:query}|orderBy:predicate:true track by $index">
            <td class="text-muted text-small">{{$index+1}}</td>
            <td>
                <button ng-click="toggleFavorite(entry)" class="btn btn-link btn-xs">
                  <span
                          ng-class="{'glyphicon-star-empty':!entry.favorite,'glyphicon-star':entry.favorite}"
                          class="glyphicon"></span>
                </button>
            </td>
            <td><img width="16px" height="16px"
            ng-src="{{utils.getFavicon(entry.feed.link)}}" alt="{{entry.feed.link}}"></td>
            <td title="{{entry.contentSnippet||entry.title}}">
                <a ng-class="{'text-muted':entry.read}"
                   data-ng-href="#/dashboard/entry/{{entry.id}}">{{entry.title|limitTo:100}}</a>
            </td>
            <!-- FEED TITLE -->
            <td data-id="{{entry.id}}" data-feedId="{{entry.feedId}}" class="text-muted text-small">
                <a class='text-muted' ng-href="#/dashboard/feed/{{entry.feed.id}}">{{entry.feed.title|limitTo:20}}</a>
            </td>
            <!-- PUBLISHED DATE -->
            <td class="text-muted text-small">{{entry.publishedDate|date:'MM/dd/yyyy hh:mm'}}</td>
            <td class="text-small">
                <button ng-click="removeEntry()"
                        title="remove entry : {{entry.title}}"
                        class="btn btn-link btn-xs hover hide">
                    <i class="glyphicon glyphicon-remove text-muted"></i>
                </button>
            </td>
        </tr>
    </table>
    <!-- PAGINATION -->
    <paginator></paginator>
</section>
